var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,l=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&r(e,n,t[n]);if(o)for(var n of o(t))a.call(t,n)&&r(e,n,t[n]);return e},c=(e,o)=>t(e,n(o));import{E as i,i as u,r as d,c as m,R as p,f,a as h,b as x,d as y,u as g,g as v,e as E,h as w,j as b,k as N,l as C,A as k,F as P,m as S,N as T,n as L,o as D,p as $,q as I,s as R,t as A,H as B}from"./vendor.e13c2e69.js";function H(){return"ClashX Runtime"===navigator.userAgent}let M=null;class O{constructor(e){this.instance=null,window.WebViewJavascriptBridge&&(this.instance=window.WebViewJavascriptBridge),this.initBridge((t=>{this.instance=t,e()}))}initBridge(e){if(!H())return null==e?void 0:e(null);if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];const t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout((()=>document.documentElement.removeChild(t)),0)}callHandler(e,t){return new Promise((n=>{var o;null==(o=this.instance)||o.callHandler(e,t,n)}))}ping(){return this.callHandler("ping")}readConfigString(){return this.callHandler("readConfigString")}getPasteboard(){return this.callHandler("getPasteboard")}getAPIInfo(){return this.callHandler("apiInfo")}setPasteboard(e){return this.callHandler("setPasteboard",e)}writeConfigWithString(e){return this.callHandler("writeConfigWithString",e)}setSystemProxy(e){return this.callHandler("setSystemProxy",e)}getStartAtLogin(){return this.callHandler("getStartAtLogin")}getProxyDelay(e){return this.callHandler("speedTest",e)}setStartAtLogin(e){return this.callHandler("setStartAtLogin",e)}isSystemProxySet(){return this.callHandler("isSystemProxySet")}}var U;(U||(U={})).SPEED_NOTIFY="speed-notify";var j=new class{constructor(){this.EE=new i}notifySpeedTest(){this.EE.emit(U.SPEED_NOTIFY)}subscribe(e,t){this.EE.addListener(e,t)}unsubscribe(e,t){this.EE.removeListener(e,t)}};function z(e,t=""){return window.localStorage.getItem(e)||t}function F(e,t){return window.localStorage.setItem(e,t)}function W(){}async function _(e){try{return[await e,null]}catch(t){return[null,t]}}function G(e){const[t,n]=u(e);return[t,d.exports.useMemo((()=>function(e,t){"string"==typeof e?n((n=>{const o=t;n[e]=o})):"function"==typeof e?n(e):"object"==typeof e&&n((t=>{const n=e;for(const e of Object.keys(n)){const o=e;t[o]=n[o]}}))}),[n])]}function V(e=!1){const[t,n]=d.exports.useState(e);return{visible:t,hide:function(){n(!1)},show:function(){n(!0)}}}function X(e){const{title:t,children:n,className:o,style:s}=e;return d.exports.createElement("header",{className:m("header",o),style:s},d.exports.createElement("h1",{className:"md:text-xl"},t),d.exports.createElement("div",{className:"flex flex-auto items-center justify-end"},n))}function J(e){const{type:t,size:n=14,className:o,style:s}=e,a=m("clash-iconfont",`icon-${t}`,o),r=l({fontSize:n},s),i=c(l({},e),{className:a,style:r});return d.exports.createElement("i",l({},i))}function Y(e){const{className:t,checked:n=!1,disabled:o=!1,onChange:s=W}=e,a=m("switch",{checked:n,disabled:o},t);return d.exports.createElement("div",{className:a,onClick:function(){o||s(!n)}},d.exports.createElement(J,{className:"switch-icon font-bold",type:"check",size:20}))}function K(e){const{className:t,style:n,children:o}=e;return d.exports.createElement("div",{className:m("card",t),style:n},o)}function q(e){const{options:t,value:n,onSelect:o}=e;return d.exports.createElement("div",{className:"button-select"},t.map((e=>d.exports.createElement("button",{value:e.value,key:e.value,className:m("button-select-options",{actived:n===e.value}),onClick:()=>null==o?void 0:o(e.value)},e.label))))}const Q={en_US:{SideBar:{Proxies:"Proxies",Overview:"Overview",Logs:"Logs",Rules:"Rules",Settings:"Setting",Connections:"Connections",Version:"Version"},Settings:{title:"Settings",labels:{startAtLogin:"Start at login",language:"language",setAsSystemProxy:"Set as system proxy",allowConnectFromLan:"Allow connect from Lan",proxyMode:"Mode",socks5ProxyPort:"Socks5 proxy port",httpProxyPort:"HTTP proxy port",mixedProxyPort:"Mixed proxy port",externalController:"External controller"},values:{cn:"中文",en:"English",global:"Global",rules:"Rules",direct:"Direct",script:"Script"},versionString:"Current ClashX is the latest version：{{version}}",checkUpdate:"Check Update",externalControllerSetting:{title:"External Controller",note:"Please note that modifying this configuration will only configure Dashboard. Will not modify your Clash configuration file. Please make sure that the external controller address matches the address in the Clash configuration file, otherwise, Dashboard will not be able to connect to Clash.",host:"Host",port:"Port",secret:"Secret"}},Logs:{title:"Logs"},Rules:{title:"Rules",providerTitle:"Providers",providerUpdateTime:"Last updated at",ruleCount:"Rule count"},Connections:{title:"Connections",keepClosed:"Keep closed connections",total:{text:"total",upload:"upload",download:"download"},closeAll:{title:"Warning",content:"This would close all connections"},filter:{all:"All"},columns:{host:"Host",network:"Network",type:"Type",chains:"Chains",rule:"Rule",time:"Time",speed:"Speed",upload:"Upload",download:"Download",sourceIP:"Source IP"}},Proxies:{title:"Proxies",editDialog:{title:"Edit Proxy",color:"Color",name:"Name",type:"Type",server:"Server",port:"Port",password:"Password",cipher:"Cipher",obfs:"Obfs","obfs-host":"Obfs-host",uuid:"UUID",alterId:"AlterId",tls:"TLS"},groupTitle:"Policy Group",providerTitle:"Providers",providerUpdateTime:"Last updated at",expandText:"Expand",collapseText:"Collapse",speedTestText:"Speed Test",breakConnectionsText:"Close connections which include the group"},Modal:{ok:"Ok",cancel:"Cancel"}},zh_CN:{SideBar:{Proxies:"代理",Overview:"总览",Logs:"日志",Rules:"规则",Settings:"设置",Connections:"连接",Version:"版本"},Settings:{title:"设置",labels:{startAtLogin:"开机时启动",language:"语言",setAsSystemProxy:"设置为系统代理",allowConnectFromLan:"允许来自局域网的连接",proxyMode:"代理模式",socks5ProxyPort:"Socks5 代理端口",httpProxyPort:"HTTP 代理端口",mixedProxyPort:"混合代理端口",externalController:"外部控制设置"},values:{cn:"中文",en:"English",global:"全局",rules:"规则",direct:"直连",script:"脚本"},versionString:"当前 ClashX 已是最新版本：{{version}}",checkUpdate:"检查更新",externalControllerSetting:{title:"编辑外部控制设置",note:"请注意，修改该配置项并不会修改你的 Clash 配置文件，请确认修改后的外部控制地址和 Clash 配置文件内的地址一致，否则会导致 Dashboard 无法连接。",host:"Host",port:"端口",secret:"密钥"}},Logs:{title:"日志"},Rules:{title:"规则",providerTitle:"规则集",providerUpdateTime:"最后更新于",ruleCount:"规则条数"},Connections:{title:"连接",keepClosed:"保留关闭连接",total:{text:"总量",upload:"上传",download:"下载"},closeAll:{title:"警告",content:"将会关闭所有连接"},filter:{all:"全部"},columns:{host:"域名",network:"网络",type:"类型",chains:"节点链",rule:"规则",time:"连接时间",speed:"速率",upload:"上传",download:"下载",sourceIP:"来源 IP"}},Proxies:{title:"代理",editDialog:{title:"编辑代理",color:"颜色",name:"名字",type:"类型",server:"服务器",port:"端口",password:"密码",cipher:"加密方式",obfs:"Obfs","obfs-host":"Obfs-host",uuid:"UUID",alterId:"AlterId",tls:"TLS"},groupTitle:"策略组",providerTitle:"代理集",providerUpdateTime:"最后更新于",expandText:"展开",collapseText:"收起",speedTestText:"测速",breakConnectionsText:"切换时打断包含策略组的连接"},Modal:{ok:"确 定",cancel:"取 消"}}},Z=Object.keys(Q);function ee(e){const[t,n]=p(e);return[t,d.exports.useMemo((()=>function(e,t){if("string"==typeof e)n((n=>f(n,(n=>{const o=t;n[e]=o}))));else if("function"==typeof e){const t=e;n((e=>f(e,t)))}else"object"==typeof e&&n((t=>f(t,(t=>{const n=e;for(const e of Object.keys(n)){const o=e;t[o]=n[o]}}))))}),[n])]}function te(e){let t=null;return async function(){return t||(t=e(),t.catch((e=>{throw t=null,e})))}}class ne{constructor(e){this.EE=new i,this.innerBuffer=[],this.isClose=!1,this.config=Object.assign({bufferLength:0,retryInterval:5e3,headers:{}},e),this.config.useWebsocket?this.websocketLoop():this.loop()}websocketLoop(){var e;const t=new URL(this.config.url);t.protocol="http:"===t.protocol?"ws:":"wss:",t.searchParams.set("token",null!=(e=this.config.token)?e:"");const n=new WebSocket(t.toString());n.addEventListener("message",(e=>{const t=JSON.parse(e.data);this.EE.emit("data",[t]),this.config.bufferLength>0&&(this.innerBuffer.push(t),this.innerBuffer.length>this.config.bufferLength&&this.innerBuffer.splice(0,this.innerBuffer.length-this.config.bufferLength))})),n.addEventListener("close",(()=>setTimeout(this.websocketLoop,this.config.retryInterval))),n.addEventListener("error",(e=>{this.EE.emit("error",e),setTimeout(this.websocketLoop,this.config.retryInterval)}))}async loop(){const[e,t]=await _(fetch(this.config.url,{mode:"cors",headers:this.config.token?{Authorization:`Bearer ${this.config.token}`}:{}}));if(t||!e.body)return void this.retry(t);const n=e.body.getReader(),o=new TextDecoder;for(;!this.isClose;){const[{value:e},t]=await _(null==n?void 0:n.read());if(t){this.retry(t);break}const s=o.decode(e).trim().split("\n").map((e=>JSON.parse(e)));this.EE.emit("data",s),this.config.bufferLength>0&&(this.innerBuffer.push(...s),this.innerBuffer.length>this.config.bufferLength&&this.innerBuffer.splice(0,this.innerBuffer.length-this.config.bufferLength))}}retry(e){this.isClose||(this.EE.emit("error",e),window.setTimeout(this.loop,this.config.retryInterval))}subscribe(e,t){this.EE.addListener(e,t)}unsubscribe(e,t){this.EE.removeListener(e,t)}buffer(){return this.innerBuffer.slice()}destory(){this.EE.removeAllListeners(),this.isClose=!0}}async function oe(){var e,t,n,o,s;if(H()){const e=await M.getAPIInfo();return{hostname:e.host,port:e.port,secret:e.secret,protocol:"http:"}}let a;{const t=document.querySelector('meta[name="external-controller"]');(null==(e=null==t?void 0:t.content)?void 0:e.match(/^https?:/))&&(a=new URL(t.content))}const r=z("externalControllerAddr",null!=(t=null==a?void 0:a.hostname)?t:"127.0.0.1"),l=z("externalControllerPort",null!=(n=null==a?void 0:a.port)?n:"9090"),c=z("secret",null!=(o=null==a?void 0:a.username)?o:""),i="127.0.0.1"===r?"http:":null!=(s=null==a?void 0:a.protocol)?s:window.location.protocol;if(!r||!l)throw new Error("can't get hostname or port");return{hostname:r,port:l,secret:c,protocol:i}}const se=te((async()=>{const{hostname:e,port:t,secret:n,protocol:o}=await oe();return h.create({baseURL:`${o}//${e}:${t}`,headers:n?{Authorization:`Bearer ${n}`}:{}})}));async function ae(){return(await se()).get("configs")}async function re(e){return(await se()).patch("configs",e)}async function le(){return(await se()).get("version")}async function ce(e){return(await se()).delete(`connections/${e}`)}const ie=te((async function(){const e=await oe(),{data:t}=await ae(),[n,o]=await _(le()),s=!!(o?"unkonwn version":n.data.version)||!0,a=`${e.protocol}//${e.hostname}:${e.port}/logs?level=${t["log-level"]}`;return new ne({url:a,bufferLength:200,token:e.secret,useWebsocket:s})})),ue=te((async function(){const e=await oe(),[t,n]=await _(le()),o=!!(n?"unkonwn version":t.data.version)||!0,s=`${e.protocol}//${e.hostname}:${e.port}/connections`;return new ne({url:s,bufferLength:200,token:e.secret,useWebsocket:o})})),de=x({key:"identity",default:!0});function me(){const[e,t]=p(de);return{identity:e,wrapFetcher:function(e){return async function(...n){const[o,s]=await _(e(...n)),a=s;if(a&&(!a.response||401===a.response.status))throw t(!1),s;return t(!0),o}},set:t}}const pe=x({key:"i18n",default:function(){const e=z("language");if(e&&Z.includes(e))return e;const t=function(){const e=[];if(window.navigator)if(window.navigator.languages)for(const t of window.navigator.languages)e.push(t);else window.navigator.language&&e.push(navigator.language);return e}();for(const n of t){if(n.includes("zh"))return"zh_CN";if(n.includes("us"))return"en_US"}return"en_US"}()});function fe(){const[e,t]=p(pe);const n=d.exports.useCallback((function(t){return{t:function(n){return v(Q[e][t],n)}}}),[e]);return{lang:e,locales:Z,setLang:function(e){t(e),function(e){F("language",e)}(e)},translation:n}}const he=x({key:"version",default:{version:"",premium:!1}});function xe(){const[e,t]=p(he),{set:n}=me();return{version:e.version,premium:e.premium,update:async function(){const[e,o]=await _(le());n(!o),t(o?{version:"",premium:!1}:{version:e.data.version,premium:!!e.data.premium})}}}const ye=x({key:"config",default:{breakConnections:!1}});function ge(){const[e,t]=ee(ye);return{data:e,set:t}}const ve=x({key:"proxyProvider",default:[]});function Ee(){const[e,t]=p(ve),{data:n,mutate:o}=g("/providers/proxy",(async()=>{const e=await async function(){return(await se()).get("providers/proxies",{validateStatus:e=>e>=200&&e<300||404===e}).then((e=>(404===e.status&&(e.data={providers:{}}),e)))}();return Object.keys(e.data.providers).map((t=>e.data.providers[t])).filter((e=>"default"!==e.name)).filter((e=>"Compatible"!==e.vehicleType))}));return d.exports.useEffect((()=>t(null!=n?n:[])),[n,t]),{providers:e,update:o}}function we(){const[{premium:e}]=p(he),{data:t,mutate:n}=g("/providers/rule",(async()=>{if(!e)return[];const t=await async function(){return(await se()).get("providers/rules")}();return Object.keys(t.data.providers).map((e=>t.data.providers[e]))}));return{providers:null!=t?t:[],update:n}}function be(){const{data:e,mutate:t}=g("/config",(async()=>{var e;const t=(await ae()).data;return{port:t.port,socksPort:t["socks-port"],mixedPort:null!=(e=t["mixed-port"])?e:0,redirPort:t["redir-port"],mode:t.mode.toLowerCase(),logLevel:t["log-level"],allowLan:t["allow-lan"]}}));return{general:null!=e?e:{},update:t}}const Ne=x({key:"proxies",default:{proxies:[],groups:[],global:{name:"GLOBAL",type:"Selector",now:"",history:[],all:[]}}});function Ce(){const[e,t]=ee(Ne),{mutate:n}=g("/proxies",(async()=>{const e=await async function(){return(await se()).get("proxies")}(),n=e.data.proxies.GLOBAL;n.name="GLOBAL";const o=new Set(["Selector","URLTest","Fallback","LoadBalance"]),s=new Set(["DIRECT","REJECT","GLOBAL"]),a=n.all.filter((e=>!s.has(e))).map((t=>c(l({},e.data.proxies[t]),{name:t}))),[r,i]=function(e,t){const n=[],o=[];for(const s of e)t(s)?n.push(s):o.push(s);return[n,o]}(a,(e=>!o.has(e.type)));t({proxies:r,groups:i,global:n})})),o=d.exports.useCallback(((e,n)=>{t((t=>{for(const o of t.groups)o.name===e&&(o.now=n)}))}),[t]);return{proxies:e.proxies,groups:e.groups,global:e.global,update:n,markProxySelected:o,set:t}}const ke=y({key:"proxyMapping",get:({get:e})=>{const t=e(Ne),n=e(ve),o=new Map;for(const s of t.proxies)o.set(s.name,s);for(const s of n)for(const e of s.proxies)o.set(e.name,e);return o}});function Pe(){const{data:e,mutate:t}=g("/clashx",(async()=>{var e,t;if(!H())return{isClashX:!1,startAtLogin:!1,systemProxy:!1};return{startAtLogin:null!=(e=await(null==M?void 0:M.getStartAtLogin()))&&e,systemProxy:null!=(t=await(null==M?void 0:M.isSystemProxySet()))&&t,isClashX:!0}}));return{data:e,update:t}}const Se=x({key:"apiData",default:{hostname:"127.0.0.1",port:"9090",secret:""}});function Te(){const[e,t]=p(Se);return{data:e,fetch:d.exports.useCallback((async function(){const e=await oe();t(l({},e))}),[t]),update:async function(e){const{hostname:t,port:n,secret:o}=e;F("externalControllerAddr",t),F("externalControllerPort",n),F("secret",o),window.location.reload()}}}const Le=x({key:"rules",default:[]});function De(){const[e,t]=ee(Le);return{rules:e,update:async function(){const e=await async function(){return(await se()).get("rules")}();t(e.data.rules)}}}function $e(e){const{className:t,data:n,onClick:o,select:s,canClick:a,errSet:r,rowHeight:l}=e,{translation:c}=fe(),{t:i}=c("Proxies"),[u,p]=d.exports.useState(!1),[f,h]=d.exports.useState(!1),x=d.exports.useRef(null);d.exports.useLayoutEffect((()=>{var e,t;h((null!=(t=null==(e=null==x?void 0:x.current)?void 0:e.offsetHeight)?t:0)>30)}),[]);const y=u?"auto":l,g=a?o:W;const v=n.map((e=>{const t=m({"tags-selected":s===e,"cursor-pointer":a,error:null==r?void 0:r.has(e)});return E.createElement("li",{className:t,key:e,onClick:()=>g(e)},e)}));return E.createElement("div",{className:m("flex items-start overflow-y-hidden",t),style:{height:y}},E.createElement("ul",{ref:x,className:m("tags",{expand:u})},v),f&&E.createElement("span",{className:"h-7 px-5 select-none cursor-pointer leading-7",onClick:function(){p(!u)}},i(u?"collapseText":"expandText")))}function Ie(e){const{className:t,style:n,value:o="",align:s="center",inside:a=!1,autoFocus:r=!1,type:l="text",disabled:c=!1,onChange:i=W,onBlur:u=W}=e,p=m("input",`text-${s}`,{"focus:shadow-none":a},t);return d.exports.createElement("input",{disabled:c,className:p,style:n,value:o,autoFocus:r,type:l,onChange:e=>i(e.target.value,e),onBlur:u})}function Re(e){const{show:t=!0,title:n="Modal",size:o="small",footer:s=!0,onOk:a=W,onClose:r=W,bodyClassName:l,bodyStyle:c,className:i,style:u,children:p}=e,{translation:f}=fe(),{t:h}=f("Modal"),x=d.exports.useRef(document.createElement("div")),y=d.exports.useRef(null);d.exports.useLayoutEffect((()=>{const e=x.current;return document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[]);const g=E.createElement("div",{className:m("modal-mask",{"modal-show":t}),ref:y,onMouseDown:function(e){e.target===y.current&&r()}},E.createElement("div",{className:m("modal",`modal-${o}`,i),style:u},E.createElement("div",{className:"modal-title"},n),E.createElement("div",{className:m("modal-body",l),style:c},p),s&&E.createElement("div",{className:"footer"},E.createElement(He,{onClick:()=>r()},h("cancel")),E.createElement(He,{type:"primary",onClick:()=>a()},h("ok")))));return w.exports.createPortal(g,x.current)}const Ae={success:"check",info:"info",warning:"info",error:"close"};function Be(e){const{message:t="",type:n="info",inside:o=!1,children:s,className:a,style:r}=e,l=m("alert",`alert-${o?"note":"box"}-${n}`,a);return E.createElement("div",{className:l,style:r},E.createElement("span",{className:"alert-icon"},E.createElement(J,{type:Ae[n],size:26})),t?E.createElement("p",{className:"alert-message"},t):E.createElement("div",{className:"alert-message"},s))}function He(e){const{type:t="normal",onClick:n=W,children:o,className:s,style:a}=e,r=m("button",`button-${t}`,s);return d.exports.createElement("button",{className:r,style:a,onClick:n},o)}function Me(e){const{className:t,checked:n=!1,onChange:o=W}=e,s=m("checkbox",{checked:n},t);return d.exports.createElement("div",{className:s,onClick:function(){o(!n)}},d.exports.createElement(J,{className:"checkbox-icon",type:"check",size:18}),d.exports.createElement("div",null,e.children))}function Oe(e){const{color:t,className:n,style:o}=e,s=m("tag",n),a=l({color:t},o),r=c(l({},e),{className:s,style:a});return d.exports.createElement("span",l({},r),e.children)}function Ue(e){const t=m("spinner",e.className);return d.exports.createElement("div",{className:t},d.exports.createElement("div",{className:"spinner-circle"},d.exports.createElement("div",{className:"spinner-inner"})),d.exports.createElement("div",{className:"spinner-circle"},d.exports.createElement("div",{className:"spinner-inner"})),d.exports.createElement("div",{className:"spinner-circle"},d.exports.createElement("div",{className:"spinner-inner"})),d.exports.createElement("div",{className:"spinner-circle"},d.exports.createElement("div",{className:"spinner-inner"})),d.exports.createElement("div",{className:"spinner-circle"},d.exports.createElement("div",{className:"spinner-inner"})))}function je(e){const t=m("loading","visible",e.className);return e.visible?E.createElement("div",{className:t},E.createElement(Ue,{className:e.spinnerClassName})):null}const ze={"#909399":0,"#00c520":260,"#ff9a28":600,"#ff3e5e":1/0};async function Fe(e){var t;if(H()){return null!=(t=await(null==M?void 0:M.getProxyDelay(e)))?t:0}const{data:{delay:n}}=await async function(e){return(await se()).get(`proxies/${encodeURIComponent(e)}/delay`,{params:{timeout:5e3,url:"http://www.gstatic.com/generate_204"}})}(e);return n}function We(e){const{config:t,className:n}=e,{set:o}=Ce(),s=d.exports.useCallback((async function(){const[e,n]=await _(Fe(t.name)),s=n?0:e;o((e=>{const n=e.proxies.find((e=>e.name===t.name));n&&n.history.push({time:Date.now().toString(),delay:s})}))}),[t.name,o]),a=d.exports.useMemo((()=>{var e;return(null==(e=t.history)?void 0:e.length)?t.history.slice(-1)[0].delay:0}),[t]);d.exports.useLayoutEffect((()=>(j.subscribe(U.SPEED_NOTIFY,s),()=>j.unsubscribe(U.SPEED_NOTIFY,s))),[s]);const r=d.exports.useMemo((()=>0===a),[a]),l=d.exports.useMemo((()=>Object.keys(ze).find((e=>a<=ze[e]))),[a]),c=r?void 0:l;return E.createElement("div",{className:m("proxy-item",{"proxy-error":r},n)},E.createElement("span",{className:"proxy-type",style:{backgroundColor:c}},t.type),E.createElement("p",{className:"proxy-name"},t.name),E.createElement("p",{className:"proxy-delay"},0===a?"-":`${a}ms`))}function _e(e){const{markProxySelected:t}=Ce(),n=b(ke),{data:o}=ge(),{config:s}=e;const a=d.exports.useMemo((()=>{var e;const t=new Set;for(const o of s.all){const s=null==(e=n.get(o))?void 0:e.history;(null==s?void 0:s.length)&&0===s.slice(-1)[0].delay&&t.add(o)}return t}),[s.all,n]),r="Selector"===s.type;return E.createElement("div",{className:"proxy-group"},E.createElement("div",{className:"proxy-group-part"},E.createElement("span",{className:"proxy-group-name"},s.name),E.createElement(Oe,{className:"proxy-group-type"},s.type)),E.createElement("div",{className:"proxy-group-tags-container"},E.createElement($e,{className:"proxy-group-tags",data:s.all,onClick:async function(n){if(await async function(e,t){return(await se()).put(`proxies/${encodeURIComponent(e)}`,{name:t})}(e.config.name,n),t(e.config.name,n),o.breakConnections){const t=[],n=await async function(){return(await se()).get("connections")}();for(const o of n.data.connections)o.chains.includes(e.config.name)&&t.push(o.id);for(const e of t)ce(e)}},errSet:a,select:s.now,canClick:r,rowHeight:30})))}function Ge(e,t){const n="en_US"===t?"en":"zh-cn";return N().locale(n).from(e)}N.extend(C);function Ve(e){const{update:t}=Ee(),{translation:n,lang:o}=fe(),{provider:s}=e,{t:a}=n("Proxies"),{visible:r,hide:l,show:c}=V();const i=d.exports.useMemo((()=>s.proxies.slice().sort(((e,t)=>-1*Ke(e,t)))),[s.proxies]);return d.exports.createElement(K,{className:"proxy-provider"},d.exports.createElement(je,{visible:r}),d.exports.createElement("div",{className:"proxy-provider-header"},d.exports.createElement("div",{className:"proxy-provider-header-part"},d.exports.createElement("span",{className:"proxy-provider-name"},s.name),d.exports.createElement(Oe,null,s.vehicleType)),d.exports.createElement("div",{className:"proxy-provider-header-part"},s.updatedAt&&d.exports.createElement("span",{className:"proxy-provider-update"},`${a("providerUpdateTime")}: ${Ge(new Date(s.updatedAt),o)}`),d.exports.createElement(J,{className:"proxy-provider-icon healthcheck",type:"healthcheck",size:18,onClick:function(){c(),async function(e){return(await se()).get(`providers/proxies/${encodeURIComponent(e)}/healthcheck`)}(s.name).then((()=>t())).finally((()=>l()))}}),d.exports.createElement(J,{className:"proxy-provider-icon",type:"update",size:18,onClick:function(){c(),async function(e){return(await se()).put(`providers/proxies/${encodeURIComponent(e)}`)}(s.name).then((()=>t())).finally((()=>l()))}}))),d.exports.createElement("ul",{className:"proxies-list"},i.map((e=>d.exports.createElement("li",{key:e.name},d.exports.createElement(We,{className:"proxy-provider-item",config:e}))))))}var Xe,Je;(Je=Xe||(Xe={}))[Je.None=0]="None",Je[Je.Asc=1]="Asc",Je[Je.Desc=2]="Desc";const Ye={0:"sort",1:"sort-ascending",2:"sort-descending"};function Ke(e,t){const n=e.history.length?e.history.slice(-1)[0].delay:0;return((t.history.length?t.history.slice(-1)[0].delay:0)||Number.MAX_SAFE_INTEGER)-(n||Number.MAX_SAFE_INTEGER)}function qe(){const{groups:e,global:t}=Ce(),{data:n,set:o}=ge(),{general:s}=be(),{translation:a}=fe(),{t:r}=a("Proxies"),l=d.exports.useMemo((()=>"global"===s.mode?[t]:e),[s,e,t]);return E.createElement(E.Fragment,null,0!==l.length&&E.createElement("div",{className:"proxies-container"},E.createElement(X,{title:r("groupTitle")},E.createElement(Me,{className:"connections-filter",checked:n.breakConnections,onChange:e=>o("breakConnections",e)},r("breakConnectionsText"))),E.createElement(K,{className:"my-3 md:my-5 p-0"},E.createElement("ul",{className:"list-none"},l.map((e=>E.createElement("li",{className:"proxies-group-item",key:e.name},E.createElement(_e,{config:e}))))))))}function Qe(){const{providers:e}=Ee(),{translation:t}=fe(),{t:n}=t("Proxies");return E.createElement(E.Fragment,null,0!==e.length&&E.createElement("div",{className:"proxies-container"},E.createElement(X,{title:n("providerTitle")}),E.createElement("ul",{className:"list-none"},e.map((e=>E.createElement("li",{className:"my-5",key:e.name},E.createElement(Ve,{provider:e})))))))}function Ze(){const{proxies:e}=Ce(),{translation:t}=fe(),{t:n}=t("Proxies");const{current:o,next:s}=function(e,t=0){if(e.length<2)throw new Error("List requires at least two elements");const[n,o]=d.exports.useState(t);return{current:d.exports.useMemo((()=>e[n]),[e,n]),next:function(){o((n+1)%e.length)}}}([1,2,0]),a=d.exports.useMemo((()=>{switch(o){case 2:return e.slice().sort(((e,t)=>Ke(e,t)));case 1:return e.slice().sort(((e,t)=>-1*Ke(e,t)));default:return e.slice()}}),[o,e]),r=s;return E.createElement(E.Fragment,null,0!==a.length&&E.createElement("div",{className:"proxies-container"},E.createElement(X,{title:n("title")},E.createElement(J,{className:"ml-3",type:Ye[o],onClick:r,size:20}),E.createElement(J,{className:"ml-3",type:"speed",size:20}),E.createElement("span",{className:"proxies-speed-test",onClick:function(){j.notifySpeedTest()}},n("speedTestText"))),E.createElement("ul",{className:"proxies-list"},a.map((e=>E.createElement("li",{key:e.name},E.createElement(We,{config:e})))))))}function et(){return E.createElement("div",{className:"page"},E.createElement(qe,null),E.createElement(Qe,null),E.createElement(Ze,null))}function tt(){const e=d.exports.useRef(null),t=d.exports.useRef([]),[n,o]=d.exports.useState([]),{translation:s}=fe(),{t:a}=s("Logs");return d.exports.useLayoutEffect((()=>{const t=e.current;t&&(t.scrollTop=t.scrollHeight)})),d.exports.useEffect((()=>{let e=null;function n(e){t.current=t.current.slice().concat(e.map((e=>c(l({},e),{time:new Date})))),o(t.current)}return async function(){e=await ie(),t.current=e.buffer(),o(t.current),e.subscribe("data",n)}(),()=>null==e?void 0:e.unsubscribe("data",n)}),[]),E.createElement("div",{className:"page"},E.createElement(X,{title:a("title")}),E.createElement(K,{className:"flex flex-col flex-1 mt-3"},E.createElement("ul",{className:"logs-panel",ref:e},n.map(((e,t)=>E.createElement("li",{className:"leading-5 inline-block",key:t},E.createElement("span",{className:"mr-4 text-gray-400 text-opacity-90"},N(e.time).format("YYYY-MM-DD HH:mm:ss")),E.createElement("span",null,"[",e.type,"] ",e.payload)))))))}function nt(e){const{update:t}=we(),{translation:n,lang:o}=fe(),{provider:s}=e,{t:a}=n("Rules"),{visible:r,hide:l,show:c}=V();const i=m("rule-provider-icon",{"rule-provider-loading":r});return d.exports.createElement(K,{className:"rule-provider"},d.exports.createElement("div",{className:"rule-provider-header"},d.exports.createElement("div",{className:"rule-provider-header-part"},d.exports.createElement("span",{className:"rule-provider-name"},s.name),d.exports.createElement(Oe,null,s.vehicleType),d.exports.createElement(Oe,{className:"rule-provider-behavior"},s.behavior),d.exports.createElement("span",{className:"rule-provider-update"},`${a("ruleCount")}: ${s.ruleCount}`)),d.exports.createElement("div",{className:"rule-provider-header-part"},s.updatedAt&&d.exports.createElement("span",{className:"rule-provider-update"},`${a("providerUpdateTime")}: ${Ge(new Date(s.updatedAt),o)}`),d.exports.createElement(J,{className:i,type:"update",size:18,onClick:function(){c(),async function(e){return(await se()).put(`providers/rules/${encodeURIComponent(e)}`)}(s.name).then((()=>t())).finally((()=>l()))}}))))}function ot(){const{providers:e}=we(),{translation:t}=fe(),{t:n}=t("Rules");return E.createElement(E.Fragment,null,0!==e.length&&E.createElement("div",{className:"proxies-container"},E.createElement(X,{title:n("providerTitle")}),E.createElement("ul",{className:"proxies-providers-list"},e.map((e=>E.createElement("li",{className:"proxies-providers-item",key:e.name},E.createElement(nt,{provider:e})))))))}function st(){const{rules:e,update:t}=De(),{translation:n}=fe(),{t:o}=n("Rules");function s({index:t,style:n}){const o=e[t];return E.createElement("li",{className:"rule-item",style:n},E.createElement("div",{className:"py-1 flex"},E.createElement("div",{className:"rule-type w-40 text-center"},o.type),E.createElement("div",{className:"payload flex-1 text-center"},o.payload),E.createElement("div",{className:"rule-proxy w-40 text-center"},o.proxy)))}return g("rules",t),E.createElement("div",{className:"page"},E.createElement(ot,null),E.createElement(X,{title:o("title")}),E.createElement(K,{className:"flex flex-col flex-1 mt-3 p-0 focus:outline-none"},E.createElement(k,{className:"rules"},(({height:t,width:n})=>E.createElement(P,{height:t,width:n,itemCount:e.length,itemSize:50},s)))))}const at=[{label:"中文",value:"zh_CN"},{label:"English",value:"en_US"}];function rt(){var e,t,n;const{premium:o}=xe(),{data:s,update:a}=Pe(),{general:r,update:l}=be(),{set:c}=me(),{data:i}=Te(),{translation:u,setLang:p,lang:f}=fe(),{t:h}=u("Settings"),[x,y]=G({socks5ProxyPort:7891,httpProxyPort:7890,mixedProxyPort:0});d.exports.useEffect((()=>{var e,t,n;y("socks5ProxyPort",null!=(e=null==r?void 0:r.socksPort)?e:0),y("httpProxyPort",null!=(t=null==r?void 0:r.port)?t:0),y("mixedProxyPort",null!=(n=null==r?void 0:r.mixedPort)?n:0)}),[r,y]);const{hostname:g,port:v}=i,{allowLan:w,mode:b}=r,N=null!=(e=null==s?void 0:s.startAtLogin)&&e,C=null!=(t=null==s?void 0:s.systemProxy)&&t,k=null!=(n=null==s?void 0:s.isClashX)&&n,P=d.exports.useMemo((()=>{const e=[{label:h("values.global"),value:"Global"},{label:h("values.rules"),value:"Rule"},{label:h("values.direct"),value:"Direct"}];return o&&e.push({label:h("values.script"),value:"Script"}),e}),[h,o]);return E.createElement("div",{className:"page"},E.createElement(X,{title:h("title")}),E.createElement(K,{className:"settings-card"},E.createElement("div",{className:"flex flex-wrap"},E.createElement("div",{className:"w-full flex md:w-1/2 items-center justify-between px-8 py-3"},E.createElement("span",{className:"label font-bold"},h("labels.startAtLogin")),E.createElement(Y,{disabled:!(null==s?void 0:s.isClashX),checked:N,onChange:async function(e){await(null==M?void 0:M.setStartAtLogin(e)),a()}})),E.createElement("div",{className:"w-full flex md:w-1/2 items-center justify-between px-8 py-3"},E.createElement("span",{className:"label font-bold"},h("labels.language")),E.createElement(q,{options:at,value:f,onSelect:e=>{p(e)}}))),E.createElement("div",{className:"flex flex-wrap"},E.createElement("div",{className:"w-full flex md:w-1/2 items-center justify-between px-8 py-3"},E.createElement("span",{className:"label font-bold"},h("labels.setAsSystemProxy")),E.createElement(Y,{disabled:!k,checked:C,onChange:async function(e){await(null==M?void 0:M.setSystemProxy(e)),a()}})),E.createElement("div",{className:"w-full flex md:w-1/2 items-center justify-between px-8 py-3"},E.createElement("span",{className:"label font-bold"},h("labels.allowConnectFromLan")),E.createElement(Y,{checked:w,onChange:async function(e){await re({"allow-lan":e}),await l()}})))),E.createElement(K,{className:"settings-card"},E.createElement("div",{className:"flex flex-wrap"},E.createElement("div",{className:"w-full flex md:w-1/2 items-center justify-between px-8 py-3"},E.createElement("span",{className:"label font-bold"},h("labels.proxyMode")),E.createElement(q,{options:P,value:S(b),onSelect:async function(e){await re({mode:e}),await l()}})),E.createElement("div",{className:"w-full flex md:w-1/2 items-center justify-between px-8 py-3"},E.createElement("span",{className:"label font-bold"},h("labels.socks5ProxyPort")),E.createElement(Ie,{className:"w-28",disabled:k,value:x.socks5ProxyPort,onChange:e=>y("socks5ProxyPort",+e),onBlur:async function(){await re({"socks-port":x.socks5ProxyPort}),await l()}}))),E.createElement("div",{className:"flex flex-wrap"},E.createElement("div",{className:"w-full flex md:w-1/2 items-center justify-between px-8 py-3"},E.createElement("span",{className:"label font-bold"},h("labels.httpProxyPort")),E.createElement(Ie,{className:"w-28",disabled:k,value:x.httpProxyPort,onChange:e=>y("httpProxyPort",+e),onBlur:async function(){await re({port:x.httpProxyPort}),await l()}})),E.createElement("div",{className:"w-full flex md:w-1/2 items-center justify-between px-8 py-3"},E.createElement("span",{className:"label font-bold"},h("labels.mixedProxyPort")),E.createElement(Ie,{className:"w-28",disabled:k,value:x.mixedProxyPort,onChange:e=>y("mixedProxyPort",+e),onBlur:async function(){await re({"mixed-port":x.mixedProxyPort}),await l()}}))),E.createElement("div",{className:"flex flex-wrap"},E.createElement("div",{className:"w-full flex md:w-1/2 items-center justify-between px-8 py-3"},E.createElement("span",{className:"label font-bold"},h("labels.externalController")),E.createElement("span",{className:m({"modify-btn":!k},"external-controller"),onClick:()=>!k&&c(!1)},`${g}:${v}`)),E.createElement("div",{className:"w-1/2 px-8"}))),E.createElement(K,{className:"clash-version hidden"},E.createElement("span",{className:"check-icon"},E.createElement(J,{type:"check",size:20})),E.createElement("p",{className:"version-info"},h("versionString")),E.createElement("span",{className:"check-update-btn"},h("checkUpdate"))))}var lt,ct;function it(e){const{routes:t}=e,{translation:n}=fe(),{version:o,premium:s,update:a}=xe(),{data:r}=Pe(),{t:l}=n("SideBar");g("version",a);const c=t.map((({path:e,name:t,exact:n,noMobile:o})=>d.exports.createElement("li",{className:m("item",{"no-mobile":o}),key:t},d.exports.createElement(T,{to:e,activeClassName:"active",exact:!!n},l(t)))));return d.exports.createElement("div",{className:"sidebar"},d.exports.createElement("img",{src:"./assets/logo.b453e72f.png",alt:"logo",className:"sidebar-logo"}),d.exports.createElement("ul",{className:"sidebar-menu"},c),d.exports.createElement("div",{className:"sidebar-version"},d.exports.createElement("span",{className:"sidebar-version-label"},"Clash",(null==r?void 0:r.isClashX)&&"X"," ",l("Version")),d.exports.createElement("span",{className:"sidebar-version-text"},o),s&&d.exports.createElement("span",{className:"sidebar-version-label"},"Premium")))}(ct=lt||(lt={})).Domain="Domain",ct.DomainSuffix="DomainSuffix",ct.DomainKeyword="DomainKeyword",ct.GeoIP="GeoIP",ct.IPCIDR="IPCIDR",ct.SrcIPCIDR="SrcIPCIDR",ct.SrcPort="SrcPort",ct.DstPort="DstPort",ct.MATCH="MATCH",ct.RuleSet="RuleSet";function ut(e){const{translation:t}=fe(),n=d.exports.useMemo((()=>t("Connections").t),[t]),{className:o,style:s}=e,a=m("connections-devices",o);function r(t){var n;null==(n=e.onChange)||n.call(e,t)}return E.createElement("div",{className:a,style:s},E.createElement("div",{className:m("connections-devices-item",{selected:""===e.selected}),onClick:()=>r("")},n("filter.all")),e.devices.map((t=>E.createElement("div",{key:t.label,className:m("connections-devices-item",{selected:e.selected===t.label}),onClick:()=>r(t.label)},t.label," (",t.number,")"))))}class dt{constructor(){this.connections=new Map,this.saveDisconnection=!1}appendToSet(e){var t;const n=e.reduce(((e,t)=>e.set(t.id,t)),new Map);for(const o of this.connections.keys())if(!n.has(o))if(this.saveDisconnection){const e=this.connections.get(o);e&&(e.completed=!0,e.uploadSpeed=0,e.downloadSpeed=0)}else this.connections.delete(o);for(const o of n.keys()){if(!this.connections.has(o)){this.connections.set(o,c(l({},n.get(o)),{uploadSpeed:0,downloadSpeed:0}));continue}const e=this.connections.get(o),s=n.get(o);null==(t=this.connections)||t.set(o,c(l({},s),{uploadSpeed:s.upload-e.upload,downloadSpeed:s.download-e.download}))}}toggleSave(){var e,t;if(this.saveDisconnection){this.saveDisconnection=!1;for(const n of this.connections.keys())(null==(t=null==(e=this.connections)?void 0:e.get(n))?void 0:t.completed)&&this.connections.delete(n)}else this.saveDisconnection=!0;return this.saveDisconnection}getConnections(){return[...this.connections.values()]}}var mt,pt;(pt=mt||(mt={})).Host="host",pt.Network="network",pt.Type="type",pt.Chains="chains",pt.Rule="rule",pt.Speed="speed",pt.Upload="upload",pt.Download="download",pt.SourceIP="sourceIP",pt.Time="time";const ft=new Set([mt.Network,mt.Type,mt.Rule,mt.Speed,mt.Upload,mt.Download,mt.SourceIP,mt.Time]);function ht(e){const t=["B","KB","MB","GB","TB"];let n=0;for(;~~(e/1024)&&n<t.length;)e/=1024,n++;return`${0===n?e:e.toFixed(2)} ${t[n]}`}function xt(){const{translation:e,lang:t}=fe(),n=d.exports.useMemo((()=>e("Connections").t),[e]),[o,s]=G({uploadTotal:0,downloadTotal:0}),{visible:a,show:r,hide:i}=V();const{connections:u,feed:p,save:f,toggleSave:h}=function(){const e=d.exports.useMemo((()=>new dt),[]),t=d.exports.useRef(!0),[n,o]=d.exports.useState([]),[s,a]=d.exports.useState(!1);return{connections:n,feed:d.exports.useCallback((function(n){e.appendToSet(n),t.current&&o(e.getConnections()),t.current=!t.current}),[e]),toggleSave:d.exports.useCallback((function(){const n=e.toggleSave();a(n),n||o(e.getConnections()),t.current=!0}),[e]),save:s}}(),x=d.exports.useMemo((()=>u.map((e=>({id:e.id,host:`${e.metadata.host||e.metadata.destinationIP}:${e.metadata.destinationPort}`,chains:e.chains.slice().reverse().join(" / "),rule:e.rule===lt.RuleSet?`${e.rule}(${e.rulePayload})`:e.rule,time:new Date(e.start).getTime(),upload:e.upload,download:e.download,sourceIP:e.metadata.sourceIP,type:e.metadata.type,network:e.metadata.network.toUpperCase(),speed:{upload:e.uploadSpeed,download:e.downloadSpeed},completed:!!e.completed})))),[u]),y=d.exports.useMemo((()=>{const e=L(u,"metadata.sourceIP");return Object.keys(e).map((t=>({label:t,number:e[t].length}))).sort(((e,t)=>e.label.localeCompare(t.label)))}),[u]),g=d.exports.useRef(null),{x:v}=D(g),w=d.exports.useMemo((()=>[{Header:n(`columns.${mt.Host}`),accessor:mt.Host,minWidth:260,width:260},{Header:n(`columns.${mt.Network}`),accessor:mt.Network,minWidth:80,width:80},{Header:n(`columns.${mt.Type}`),accessor:mt.Type,minWidth:120,width:120},{Header:n(`columns.${mt.Chains}`),accessor:mt.Chains,minWidth:200,width:200},{Header:n(`columns.${mt.Rule}`),accessor:mt.Rule,minWidth:140,width:140},{id:mt.Speed,Header:n(`columns.${mt.Speed}`),accessor:e=>[e.speed.upload,e.speed.download],sortType(e,t){const n=e.original.speed,o=t.original.speed;return n.download===o.download?n.upload-o.upload:n.download-o.download},minWidth:200,width:200,sortDescFirst:!0},{Header:n(`columns.${mt.Upload}`),accessor:mt.Upload,minWidth:100,width:100,sortDescFirst:!0},{Header:n(`columns.${mt.Download}`),accessor:mt.Download,minWidth:100,width:100,sortDescFirst:!0},{Header:n(`columns.${mt.SourceIP}`),accessor:mt.SourceIP,minWidth:140,width:140},{Header:n(`columns.${mt.Time}`),accessor:mt.Time,minWidth:120,width:120,sortType:(e,t)=>t.original.time-e.original.time}]),[n]);d.exports.useLayoutEffect((()=>{let e=null;function t(e){for(const t of e)s({uploadTotal:t.uploadTotal,downloadTotal:t.downloadTotal}),p(t.connections)}return async function(){e=await ue(),e.subscribe("data",t)}(),()=>{e&&(e.unsubscribe("data",t),e.destory())}}),[p,s]);const{getTableProps:b,getTableBodyProps:N,headerGroups:C,rows:k,prepareRow:P,setFilter:S}=$.exports.useTable({columns:w,data:x,autoResetSortBy:!1,autoResetFilters:!1,initialState:{sortBy:[{id:mt.Time,desc:!1}]}},$.exports.useResizeColumns,$.exports.useBlockLayout,$.exports.useFilters,$.exports.useSortBy),T=d.exports.useMemo((()=>C[0]),[C]),I=d.exports.useCallback((function(e){switch(e.column.id){case mt.Speed:return function(e,t){switch(!0){case 0===e&&0===t:return"-";case 0!==e&&0!==t:return`↑ ${ht(e)}/s ↓ ${ht(t)}/s`;case 0!==e:return`↑ ${ht(e)}/s`;default:return`↓ ${ht(t)}/s`}}(e.value[0],e.value[1]);case mt.Upload:case mt.Download:return ht(e.value);case mt.Time:return Ge(new Date(e.value),t);default:return e.value}}),[t]),[R,A]=d.exports.useState("");return E.createElement("div",{className:"page"},E.createElement(X,{title:n("title")},E.createElement("span",{className:"connections-filter flex-1 cursor-default"},`(${n("total.text")}: ${n("total.upload")} ${ht(o.uploadTotal)} ${n("total.download")} ${ht(o.downloadTotal)})`),E.createElement(Me,{className:"connections-filter",checked:f,onChange:h},n("keepClosed")),E.createElement(J,{className:"connections-filter dangerous",onClick:r,type:"close-all",size:20})),y.length>1&&E.createElement(ut,{devices:y,selected:R,onChange:function(e){A(e),null==S||S(mt.SourceIP,e)}}),E.createElement(K,{className:"connections-card"},E.createElement("div",c(l({},b()),{className:"flex flex-col w-full flex-1 overflow-auto",style:{flexBasis:0},ref:g}),E.createElement("div",c(l({},T.getHeaderGroupProps()),{className:"connections-header"}),T.headers.map(((e,t)=>{const n=e,o=n.id;return E.createElement("div",c(l({},n.getHeaderProps()),{className:m("connections-th",{resizing:n.isResizing,fixed:v>0&&n.id===mt.Host}),key:o}),E.createElement("div",l({},n.getSortByToggleProps()),e.render("Header"),n.isSorted?n.isSortedDesc?" ↓":" ↑":null),t!==T.headers.length-1&&E.createElement("div",c(l({},n.getResizerProps()),{className:"connections-resizer"})))}))),E.createElement("div",c(l({},N()),{className:"flex-1"}),k.map((e=>(P(e),E.createElement("div",c(l({},e.getRowProps()),{className:"connections-item",key:e.original.id}),e.cells.map((t=>{const n=m("connections-block",{"text-center":ft.has(t.column.id),completed:e.original.completed},{fixed:v>0&&t.column.id===mt.Host});return E.createElement("div",c(l({},t.getCellProps()),{className:n,key:t.column.id}),I(t))}))))))))),E.createElement(Re,{title:n("closeAll.title"),show:a,onClose:i,onOk:function(){(async function(){return(await se()).delete("connections")})().finally((()=>i()))}},n("closeAll.content")))}function yt(){const{translation:e}=fe(),{t:t}=e("Settings"),{data:n,update:o,fetch:s}=Te(),{identity:a,set:r}=me(),[l,c]=G({hostname:"",port:"",secret:""});return d.exports.useEffect((()=>{s()}),[s]),d.exports.useEffect((()=>{c({hostname:n.hostname,port:n.port,secret:n.secret})}),[n,c]),E.createElement(Re,{show:!a,title:t("externalControllerSetting.title"),bodyClassName:"external-controller",onClose:()=>r(!0),onOk:function(){const{hostname:e,port:t,secret:n}=l;o({hostname:e,port:t,secret:n})}},E.createElement(Be,{type:"info",inside:!0},E.createElement("p",null,t("externalControllerSetting.note"))),E.createElement("div",{className:"flex items-center"},E.createElement("span",{className:"md:my-3 w-14 my-1 font-bold"},t("externalControllerSetting.host")),E.createElement(Ie,{className:"md:my-3 flex-1 my-1",align:"left",inside:!0,value:l.hostname,onChange:e=>c("hostname",e)})),E.createElement("div",{className:"flex items-center"},E.createElement("div",{className:"md:my-3 w-14 my-1 font-bold"},t("externalControllerSetting.port")),E.createElement(Ie,{className:"md:my-3 w-14 my-1 flex-1",align:"left",inside:!0,value:l.port,onChange:e=>c("port",e)})),E.createElement("div",{className:"flex items-center"},E.createElement("div",{className:"md:my-3 w-14 my-1 font-bold"},t("externalControllerSetting.secret")),E.createElement(Ie,{className:"md:my-3 w-14 my-1 flex-1",align:"left",inside:!0,value:l.secret,onChange:e=>c("secret",e)})))}function gt(){d.exports.useEffect((()=>{ie()}),[]);const e=[{path:"/proxies",name:"Proxies",component:et},{path:"/logs",name:"Logs",component:tt},{path:"/rules",name:"Rules",component:st,noMobile:!0},{path:"/connections",name:"Connections",component:xt,noMobile:!0},{path:"/settings",name:"Settings",component:rt}];return E.createElement("div",{className:m("app",{"not-clashx":!H()})},E.createElement(it,{routes:e}),E.createElement("div",{className:"page-container"},E.createElement(I,{exact:!0,path:"/",component:()=>E.createElement(R,{to:"/proxies"})}),e.map((e=>E.createElement(I,{exact:!1,path:e.path,key:e.path,component:e.component})))),E.createElement(yt,null))}var vt;function Et(){const e=document.getElementById("root"),t=E.createElement(A,null,E.createElement(B,null,E.createElement(gt,null)));w.exports.render(t,e)}H()?(vt=()=>Et(),M?vt():M=new O(vt)):Et();
